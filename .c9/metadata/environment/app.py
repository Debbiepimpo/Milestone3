{"filter":false,"title":"app.py","tooltip":"/app.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":520,"column":2},"end":{"row":520,"column":3},"action":"remove","lines":["`"],"id":2757}],[{"start":{"row":520,"column":2},"end":{"row":520,"column":4},"action":"insert","lines":["  "],"id":2758}],[{"start":{"row":520,"column":4},"end":{"row":520,"column":5},"action":"remove","lines":[" "],"id":2759}],[{"start":{"row":526,"column":4},"end":{"row":526,"column":8},"action":"remove","lines":["    "],"id":2760},{"start":{"row":526,"column":0},"end":{"row":526,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":526,"column":0},"end":{"row":526,"column":4},"action":"insert","lines":["    "],"id":2761}],[{"start":{"row":528,"column":7},"end":{"row":528,"column":8},"action":"remove","lines":[" "],"id":2762}],[{"start":{"row":528,"column":6},"end":{"row":528,"column":7},"action":"remove","lines":[" "],"id":2763},{"start":{"row":528,"column":5},"end":{"row":528,"column":6},"action":"remove","lines":[" "]},{"start":{"row":528,"column":4},"end":{"row":528,"column":5},"action":"remove","lines":[" "]}],[{"start":{"row":529,"column":4},"end":{"row":529,"column":8},"action":"remove","lines":["    "],"id":2764}],[{"start":{"row":537,"column":4},"end":{"row":537,"column":8},"action":"remove","lines":["    "],"id":2765}],[{"start":{"row":529,"column":4},"end":{"row":529,"column":8},"action":"insert","lines":["    "],"id":2766}],[{"start":{"row":537,"column":4},"end":{"row":537,"column":8},"action":"insert","lines":["    "],"id":2767}],[{"start":{"row":529,"column":4},"end":{"row":529,"column":8},"action":"remove","lines":["    "],"id":2768}],[{"start":{"row":537,"column":4},"end":{"row":537,"column":8},"action":"remove","lines":["    "],"id":2769}],[{"start":{"row":537,"column":4},"end":{"row":537,"column":8},"action":"insert","lines":["    "],"id":2770}],[{"start":{"row":541,"column":4},"end":{"row":543,"column":39},"action":"remove","lines":["else:","        flash(\"You must be logged in to Edit, Save or Delete a recipe!\")","        return redirect(url_for('login'"],"id":2771}],[{"start":{"row":541,"column":5},"end":{"row":541,"column":6},"action":"remove","lines":[")"],"id":2772},{"start":{"row":541,"column":4},"end":{"row":541,"column":5},"action":"remove","lines":[")"]}],[{"start":{"row":537,"column":4},"end":{"row":537,"column":8},"action":"remove","lines":["    "],"id":2773}],[{"start":{"row":538,"column":8},"end":{"row":538,"column":12},"action":"remove","lines":["    "],"id":2774}],[{"start":{"row":539,"column":8},"end":{"row":539,"column":12},"action":"remove","lines":["    "],"id":2775}],[{"start":{"row":540,"column":8},"end":{"row":540,"column":12},"action":"remove","lines":["    "],"id":2776}],[{"start":{"row":534,"column":8},"end":{"row":534,"column":12},"action":"remove","lines":["    "],"id":2777}],[{"start":{"row":535,"column":44},"end":{"row":535,"column":48},"action":"remove","lines":["    "],"id":2778}],[{"start":{"row":532,"column":52},"end":{"row":532,"column":56},"action":"remove","lines":["    "],"id":2779}],[{"start":{"row":531,"column":50},"end":{"row":531,"column":51},"action":"remove","lines":[" "],"id":2780},{"start":{"row":531,"column":49},"end":{"row":531,"column":50},"action":"remove","lines":[" "]},{"start":{"row":531,"column":48},"end":{"row":531,"column":49},"action":"remove","lines":[" "]}],[{"start":{"row":531,"column":48},"end":{"row":531,"column":49},"action":"remove","lines":[" "],"id":2781}],[{"start":{"row":530,"column":8},"end":{"row":530,"column":12},"action":"remove","lines":["    "],"id":2782}],[{"start":{"row":531,"column":44},"end":{"row":531,"column":48},"action":"remove","lines":["    "],"id":2783}],[{"start":{"row":532,"column":50},"end":{"row":532,"column":51},"action":"remove","lines":[" "],"id":2784},{"start":{"row":532,"column":49},"end":{"row":532,"column":50},"action":"remove","lines":[" "]},{"start":{"row":532,"column":48},"end":{"row":532,"column":49},"action":"remove","lines":[" "]}],[{"start":{"row":532,"column":48},"end":{"row":532,"column":49},"action":"remove","lines":[" "],"id":2785}],[{"start":{"row":554,"column":4},"end":{"row":554,"column":51},"action":"remove","lines":["user = user.find_one({\"user\": session['user']})"],"id":2786},{"start":{"row":554,"column":4},"end":{"row":554,"column":25},"action":"insert","lines":[" user=session['user']"]}],[{"start":{"row":554,"column":4},"end":{"row":554,"column":5},"action":"remove","lines":[" "],"id":2787}],[{"start":{"row":556,"column":32},"end":{"row":556,"column":33},"action":"remove","lines":["_"],"id":2788},{"start":{"row":556,"column":32},"end":{"row":556,"column":33},"action":"remove","lines":["r"]},{"start":{"row":556,"column":32},"end":{"row":556,"column":33},"action":"remove","lines":["e"]},{"start":{"row":556,"column":32},"end":{"row":556,"column":33},"action":"remove","lines":["c"]},{"start":{"row":556,"column":32},"end":{"row":556,"column":33},"action":"remove","lines":["i"]},{"start":{"row":556,"column":32},"end":{"row":556,"column":33},"action":"remove","lines":["p"]},{"start":{"row":556,"column":32},"end":{"row":556,"column":33},"action":"remove","lines":["e"]}],[{"start":{"row":556,"column":32},"end":{"row":556,"column":33},"action":"remove","lines":["s"],"id":2789}],[{"start":{"row":495,"column":3},"end":{"row":498,"column":8},"action":"remove","lines":[" if 'user' in session:","        user_in_db = user.find_one({\"user\": user})","        favourites = mongo.db.user.find(user_in_db)","        "],"id":2790},{"start":{"row":495,"column":3},"end":{"row":501,"column":26},"action":"insert","lines":[" # If the user is not logged the page will be redirected to Login page.","    if session.get('logged_in') is None:","        flash(\"Please login for getting full access to your website\")","        return redirect(url_for('sign_in'))","    ","    # When the user is in session, the  username is stored on a variable","    user = session['user']"]}],[{"start":{"row":502,"column":4},"end":{"row":502,"column":8},"action":"remove","lines":["    "],"id":2791}],[{"start":{"row":501,"column":26},"end":{"row":502,"column":0},"action":"insert","lines":["",""],"id":2792},{"start":{"row":502,"column":0},"end":{"row":502,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":504,"column":4},"end":{"row":504,"column":8},"action":"remove","lines":["    "],"id":2793}],[{"start":{"row":506,"column":4},"end":{"row":506,"column":8},"action":"remove","lines":["    "],"id":2794}],[{"start":{"row":507,"column":4},"end":{"row":507,"column":8},"action":"remove","lines":["    "],"id":2795}],[{"start":{"row":508,"column":32},"end":{"row":508,"column":36},"action":"remove","lines":["    "],"id":2796}],[{"start":{"row":509,"column":24},"end":{"row":509,"column":28},"action":"remove","lines":["    "],"id":2797}],[{"start":{"row":511,"column":3},"end":{"row":513,"column":47},"action":"remove","lines":[" else:","        flash(\"You must be logged in!\")","        return redirect(url_for('get_recipes'))"],"id":2798},{"start":{"row":511,"column":2},"end":{"row":511,"column":3},"action":"remove","lines":[" "]},{"start":{"row":511,"column":1},"end":{"row":511,"column":2},"action":"remove","lines":[" "]},{"start":{"row":511,"column":0},"end":{"row":511,"column":1},"action":"remove","lines":[" "]},{"start":{"row":510,"column":7},"end":{"row":511,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":510,"column":6},"end":{"row":510,"column":7},"action":"remove","lines":[" "],"id":2799},{"start":{"row":510,"column":5},"end":{"row":510,"column":6},"action":"remove","lines":[" "]},{"start":{"row":510,"column":4},"end":{"row":510,"column":5},"action":"remove","lines":[" "]},{"start":{"row":510,"column":0},"end":{"row":510,"column":4},"action":"remove","lines":["    "]},{"start":{"row":509,"column":26},"end":{"row":510,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":511,"column":46},"end":{"row":511,"column":61},"action":"remove","lines":["user=user_in_db"],"id":2800}],[{"start":{"row":511,"column":45},"end":{"row":511,"column":46},"action":"remove","lines":[" "],"id":2801},{"start":{"row":511,"column":44},"end":{"row":511,"column":45},"action":"remove","lines":[","]}],[{"start":{"row":504,"column":26},"end":{"row":504,"column":27},"action":"remove","lines":["b"],"id":2802},{"start":{"row":504,"column":25},"end":{"row":504,"column":26},"action":"remove","lines":["d"]},{"start":{"row":504,"column":24},"end":{"row":504,"column":25},"action":"remove","lines":["_"]},{"start":{"row":504,"column":23},"end":{"row":504,"column":24},"action":"remove","lines":["n"]},{"start":{"row":504,"column":22},"end":{"row":504,"column":23},"action":"remove","lines":["i"]},{"start":{"row":504,"column":21},"end":{"row":504,"column":22},"action":"remove","lines":["_"]}],[{"start":{"row":489,"column":31},"end":{"row":490,"column":37},"action":"insert","lines":[",defaults={'page':1})","@app.route('/favourites/page/<page>')"],"id":2807}],[{"start":{"row":489,"column":30},"end":{"row":489,"column":31},"action":"remove","lines":["'"],"id":2808},{"start":{"row":489,"column":29},"end":{"row":489,"column":30},"action":"remove","lines":[">"]},{"start":{"row":489,"column":28},"end":{"row":489,"column":29},"action":"remove","lines":["r"]},{"start":{"row":489,"column":27},"end":{"row":489,"column":28},"action":"remove","lines":["e"]},{"start":{"row":489,"column":26},"end":{"row":489,"column":27},"action":"remove","lines":["s"]},{"start":{"row":489,"column":25},"end":{"row":489,"column":26},"action":"remove","lines":["u"]},{"start":{"row":489,"column":24},"end":{"row":489,"column":25},"action":"remove","lines":["<"]}],[{"start":{"row":491,"column":15},"end":{"row":491,"column":19},"action":"remove","lines":["user"],"id":2809},{"start":{"row":491,"column":15},"end":{"row":491,"column":16},"action":"insert","lines":["p"]},{"start":{"row":491,"column":16},"end":{"row":491,"column":17},"action":"insert","lines":["a"]},{"start":{"row":491,"column":17},"end":{"row":491,"column":18},"action":"insert","lines":["g"]},{"start":{"row":491,"column":18},"end":{"row":491,"column":19},"action":"insert","lines":["e"]}],[{"start":{"row":489,"column":23},"end":{"row":489,"column":24},"action":"remove","lines":["/"],"id":2810}],[{"start":{"row":489,"column":23},"end":{"row":489,"column":24},"action":"insert","lines":["'"],"id":2811}],[{"start":{"row":490,"column":37},"end":{"row":490,"column":38},"action":"remove","lines":[")"],"id":2812}],[{"start":{"row":557,"column":31},"end":{"row":557,"column":32},"action":"remove","lines":["e"],"id":2814}],[{"start":{"row":557,"column":31},"end":{"row":557,"column":32},"action":"insert","lines":["e"],"id":2815},{"start":{"row":557,"column":32},"end":{"row":557,"column":33},"action":"insert","lines":["s"]}],[{"start":{"row":557,"column":32},"end":{"row":557,"column":33},"action":"remove","lines":["s"],"id":2816}],[{"start":{"row":557,"column":4},"end":{"row":557,"column":34},"action":"remove","lines":["favourites = user['favourite']"],"id":2820},{"start":{"row":557,"column":4},"end":{"row":557,"column":79},"action":"insert","lines":["favourite=mongo.db.favourites.find_one({\"recipe_id\":recipe_id,\"user\":user})"]}],[{"start":{"row":563,"column":42},"end":{"row":563,"column":43},"action":"remove","lines":["s"],"id":2821}],[{"start":{"row":563,"column":42},"end":{"row":563,"column":43},"action":"insert","lines":["s"],"id":2822}],[{"start":{"row":557,"column":13},"end":{"row":557,"column":14},"action":"insert","lines":["s"],"id":2823}],[{"start":{"row":527,"column":4},"end":{"row":527,"column":18},"action":"remove","lines":["favourites = u"],"id":2824},{"start":{"row":527,"column":17},"end":{"row":527,"column":31},"action":"insert","lines":["favourites = u"]}],[{"start":{"row":527,"column":4},"end":{"row":527,"column":34},"action":"remove","lines":["ser['favouritfavourites = ue']"],"id":2825},{"start":{"row":527,"column":4},"end":{"row":528,"column":46},"action":"insert","lines":["favourites=mongo.db.favourites","    recipe={'recipe_id':recipe_id,'user':user}"]}],[{"start":{"row":528,"column":4},"end":{"row":528,"column":46},"action":"remove","lines":["recipe={'recipe_id':recipe_id,'user':user}"],"id":2826}],[{"start":{"row":528,"column":0},"end":{"row":528,"column":4},"action":"remove","lines":["    "],"id":2827},{"start":{"row":527,"column":34},"end":{"row":528,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":505,"column":4},"end":{"row":505,"column":34},"action":"remove","lines":["favourites = user[\"favourite\"]"],"id":2828},{"start":{"row":505,"column":4},"end":{"row":506,"column":56},"action":"insert","lines":[" favourites_total_user= mongo.db.favourites.find({ 'user': user  }).sort('_id', -1)","    favourites_total_count=favourites_total_user.count()"]}],[{"start":{"row":505,"column":4},"end":{"row":505,"column":5},"action":"remove","lines":[" "],"id":2829}],[{"start":{"row":506,"column":0},"end":{"row":506,"column":56},"action":"remove","lines":["    favourites_total_count=favourites_total_user.count()"],"id":2830},{"start":{"row":505,"column":86},"end":{"row":506,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":506,"column":4},"end":{"row":514,"column":51},"action":"insert","lines":[" favourites_total_count=favourites_total_user.count()","    # If the user hasn't got any recipes on his cookbook to display then this message wil be display","    message=\"\"","    recipes_id=[]","    if favourites_total_count==0:","        message=\"Sorry, there's no recipes to display\"","    else:","        for favourite in favourites_total_user :","            recipes_id.append(favourite.get('_id'))"],"id":2834}],[{"start":{"row":506,"column":4},"end":{"row":506,"column":5},"action":"remove","lines":[" "],"id":2835}],[{"start":{"row":515,"column":3},"end":{"row":518,"column":26},"action":"remove","lines":[" # Finds favourite recipes in Recipe collection in order to display full recipes","    favourite = recipes.find({\"_id\" : {","                                \"$in\" : favourites }","                        })"],"id":2836}],[{"start":{"row":515,"column":3},"end":{"row":517,"column":0},"action":"insert","lines":["recipes_total_user=mongo.db.recipes.find({\"_id\":{\"$in\":recipes_id}})","        recipes_total_count=favourites_total_user.count()",""],"id":2837}],[{"start":{"row":514,"column":51},"end":{"row":514,"column":55},"action":"remove","lines":["    "],"id":2838},{"start":{"row":514,"column":51},"end":{"row":515,"column":0},"action":"insert","lines":["",""]},{"start":{"row":515,"column":0},"end":{"row":515,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":515,"column":8},"end":{"row":515,"column":12},"action":"remove","lines":["    "],"id":2839},{"start":{"row":515,"column":4},"end":{"row":515,"column":8},"action":"remove","lines":["    "]}],[{"start":{"row":516,"column":3},"end":{"row":516,"column":4},"action":"insert","lines":[" "],"id":2840}],[{"start":{"row":517,"column":4},"end":{"row":517,"column":8},"action":"remove","lines":["    "],"id":2841},{"start":{"row":517,"column":0},"end":{"row":517,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":517,"column":0},"end":{"row":517,"column":4},"action":"insert","lines":["    "],"id":2842}],[{"start":{"row":519,"column":4},"end":{"row":525,"column":32},"action":"insert","lines":[" # It set how many recipes will be maximum display per page (same as the recipes above) ","        page_size=10","        page=int(page)","        skips=page_size * (int(page) - 1)","        recipes_per_page=recipes_total_user.skip(skips).limit(page_size + 1)","        recipes_length=recipes_per_page.count(True)","        message=recipes_per_page"],"id":2843}],[{"start":{"row":519,"column":4},"end":{"row":519,"column":5},"action":"remove","lines":[" "],"id":2844}],[{"start":{"row":520,"column":4},"end":{"row":520,"column":8},"action":"remove","lines":["    "],"id":2845}],[{"start":{"row":521,"column":4},"end":{"row":521,"column":8},"action":"remove","lines":["    "],"id":2846}],[{"start":{"row":522,"column":4},"end":{"row":522,"column":8},"action":"remove","lines":["    "],"id":2847}],[{"start":{"row":523,"column":4},"end":{"row":523,"column":8},"action":"remove","lines":["    "],"id":2848}],[{"start":{"row":524,"column":6},"end":{"row":524,"column":7},"action":"remove","lines":[" "],"id":2849},{"start":{"row":524,"column":5},"end":{"row":524,"column":6},"action":"remove","lines":[" "]},{"start":{"row":524,"column":4},"end":{"row":524,"column":5},"action":"remove","lines":[" "]}],[{"start":{"row":524,"column":4},"end":{"row":524,"column":5},"action":"remove","lines":[" "],"id":2850}],[{"start":{"row":525,"column":4},"end":{"row":525,"column":8},"action":"remove","lines":["    "],"id":2851}],[{"start":{"row":525,"column":32},"end":{"row":526,"column":0},"action":"insert","lines":["",""],"id":2852},{"start":{"row":526,"column":0},"end":{"row":526,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":527,"column":45},"end":{"row":528,"column":91},"action":"insert","lines":["recipes=recipes_total_user,page_size=page_size,page=page,","            recipes_length=recipes_length,total_recipes=recipes_total_count,message=message"],"id":2853}],[{"start":{"row":528,"column":91},"end":{"row":528,"column":92},"action":"insert","lines":[","],"id":2854}],[{"start":{"row":527,"column":45},"end":{"row":527,"column":46},"action":"insert","lines":[" "],"id":2855}],[{"start":{"row":596,"column":0},"end":{"row":596,"column":2},"action":"insert","lines":["''"],"id":2857}],[{"start":{"row":596,"column":2},"end":{"row":596,"column":3},"action":"insert","lines":["'"],"id":2858}],[{"start":{"row":663,"column":0},"end":{"row":663,"column":1},"action":"remove","lines":[" "],"id":2859}],[{"start":{"row":663,"column":0},"end":{"row":663,"column":1},"action":"insert","lines":["'"],"id":2860},{"start":{"row":663,"column":1},"end":{"row":663,"column":2},"action":"insert","lines":["'"]},{"start":{"row":663,"column":2},"end":{"row":663,"column":3},"action":"insert","lines":["'"]}],[{"start":{"row":663,"column":2},"end":{"row":663,"column":3},"action":"remove","lines":["'"],"id":2861},{"start":{"row":663,"column":1},"end":{"row":663,"column":2},"action":"remove","lines":["'"]},{"start":{"row":663,"column":0},"end":{"row":663,"column":1},"action":"remove","lines":["'"]}],[{"start":{"row":663,"column":0},"end":{"row":663,"column":1},"action":"insert","lines":["'"],"id":2862},{"start":{"row":663,"column":1},"end":{"row":663,"column":2},"action":"insert","lines":["'"]},{"start":{"row":663,"column":2},"end":{"row":663,"column":3},"action":"insert","lines":["'"]}],[{"start":{"row":663,"column":3},"end":{"row":663,"column":4},"action":"remove","lines":[" "],"id":2863},{"start":{"row":663,"column":2},"end":{"row":663,"column":3},"action":"remove","lines":["'"]},{"start":{"row":663,"column":1},"end":{"row":663,"column":2},"action":"remove","lines":["'"]},{"start":{"row":663,"column":0},"end":{"row":663,"column":1},"action":"remove","lines":["'"]}],[{"start":{"row":596,"column":2},"end":{"row":596,"column":3},"action":"remove","lines":["'"],"id":2864},{"start":{"row":596,"column":1},"end":{"row":596,"column":2},"action":"remove","lines":["'"]},{"start":{"row":596,"column":0},"end":{"row":596,"column":1},"action":"remove","lines":["'"]}],[{"start":{"row":595,"column":0},"end":{"row":595,"column":2},"action":"insert","lines":["''"],"id":2865}],[{"start":{"row":595,"column":2},"end":{"row":595,"column":3},"action":"insert","lines":["'"],"id":2866}],[{"start":{"row":488,"column":1},"end":{"row":488,"column":3},"action":"insert","lines":["''"],"id":2867}],[{"start":{"row":488,"column":3},"end":{"row":488,"column":4},"action":"insert","lines":["'"],"id":2868}],[{"start":{"row":488,"column":0},"end":{"row":488,"column":1},"action":"remove","lines":[" "],"id":2869}]]},"ace":{"folds":[{"start":{"row":13,"column":12},"end":{"row":14,"column":40},"placeholder":"..."},{"start":{"row":18,"column":14},"end":{"row":21,"column":43},"placeholder":"..."},{"start":{"row":50,"column":15},"end":{"row":64,"column":43},"placeholder":"..."},{"start":{"row":67,"column":13},"end":{"row":69,"column":57},"placeholder":"..."},{"start":{"row":491,"column":21},"end":{"row":528,"column":136},"placeholder":"..."},{"start":{"row":532,"column":31},"end":{"row":562,"column":82},"placeholder":"..."},{"start":{"row":566,"column":31},"end":{"row":593,"column":41},"placeholder":"..."},{"start":{"row":599,"column":21},"end":{"row":631,"column":92},"placeholder":"..."},{"start":{"row":634,"column":31},"end":{"row":647,"column":59},"placeholder":"..."},{"start":{"row":650,"column":31},"end":{"row":662,"column":59},"placeholder":"..."}],"scrolltop":6800.21875,"scrollleft":0,"selection":{"start":{"row":668,"column":23},"end":{"row":668,"column":23},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":482,"state":"start","mode":"ace/mode/python"}},"timestamp":1566573276046,"hash":"4f234746df3ab97201e490186577b608438777f7"}